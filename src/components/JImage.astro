---
const { src, alt, width, height, pl, pr } = Astro.props;
---

<j-img data-url={src} data-pl={pl} data-pr={pr}>
  <button title={alt}><img src={src} width={width} height={height}/></button>
</j-img>

<script>
  class JImage extends HTMLElement {
    constructor() {
      super();

      const url = this.dataset.url;
      const padding = `padding-left: ${this.dataset.pl}px; padding-right: ${this.dataset.pr}px;` ;

      /*let modal = `{
        <img id="myImg" src="${url}.jpg" alt="Snow" style="width:100%;max-width:300px">
        <div id="myModal" class="modal">
          <span class="close">&times;</span>
          <img class="modal-content" id="img01">
          <div id="caption"></div>
        </div>
        }`;*/

      const button = this.querySelector('button');

      button!.setAttribute("style", padding);

      button!.addEventListener('click', () => {
        window.open(url);
      });

      //button!.addEventListener('mouseover', () => {
          //const mainfragment = document.getElementById("main-fragment");
          //mainfragment!.setAttribute("set:html", dialogHtml);
          //alert(url);
          //<button onclick={`window.${id}.showModal()`}>{open}</button>
      //});
    }

  }

  customElements.define('j-img', JImage);
</script>
